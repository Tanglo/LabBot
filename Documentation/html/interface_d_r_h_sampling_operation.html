<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>LabBot: DRHSamplingOperation Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LabBot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#pub-static-methods">Class Methods</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_d_r_h_sampling_operation-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DRHSamplingOperation Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class for managing concurrent sampling of data from a DAQ device.  
 <a href="interface_d_r_h_sampling_operation.html#details">More...</a></p>

<p><code>#import &lt;<a class="el" href="_d_r_h_sampling_operation_8h_source.html">DRHSamplingOperation.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for DRHSamplingOperation:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_d_r_h_sampling_operation.png" usemap="#DRHSamplingOperation_map" alt=""/>
  <map id="DRHSamplingOperation_map" name="DRHSamplingOperation_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:ae3c93d199c77b174e8cfd519a85f44ec"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_d_r_h_sampling_operation.html">DRHSamplingOperation</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_d_r_h_sampling_operation.html#ae3c93d199c77b174e8cfd519a85f44ec">initSamplingOperationWith:And:</a></td></tr>
<tr class="separator:ae3c93d199c77b174e8cfd519a85f44ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e7f9cd2f90d9876fcf416142d0784f6"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_d_r_h_sampling_operation.html#a3e7f9cd2f90d9876fcf416142d0784f6">start</a></td></tr>
<tr class="separator:a3e7f9cd2f90d9876fcf416142d0784f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76b9e1d150c5cb3ac1b5fc6e24c29719"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_d_r_h_sampling_operation.html#a76b9e1d150c5cb3ac1b5fc6e24c29719">cancel</a></td></tr>
<tr class="separator:a76b9e1d150c5cb3ac1b5fc6e24c29719"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Class Methods</h2></td></tr>
<tr class="memitem:a1949e4d7009d4e794f2ffbeb298caef1"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_d_r_h_sampling_operation.html">DRHSamplingOperation</a> *)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_d_r_h_sampling_operation.html#a1949e4d7009d4e794f2ffbeb298caef1">samplingOperationWith:And:</a></td></tr>
<tr class="separator:a1949e4d7009d4e794f2ffbeb298caef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a8be933f8f0eaed7ae54c915174a03c54"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8be933f8f0eaed7ae54c915174a03c54"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_d_r_h_sampling_operation.html#a8be933f8f0eaed7ae54c915174a03c54">executing</a></td></tr>
<tr class="memdesc:a8be933f8f0eaed7ae54c915174a03c54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the exectuion state of the receiver. Initiated as <code>NO</code> and should be set to <code>YES</code> by the receiver's <code>start</code> method. It should be set to <code>NO</code> by any of the receiver's methods that stop the receiver from exectuting. <br /></td></tr>
<tr class="separator:a8be933f8f0eaed7ae54c915174a03c54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75c8aedc59733d2d675dfbba76213b3c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a75c8aedc59733d2d675dfbba76213b3c"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_d_r_h_sampling_operation.html#a75c8aedc59733d2d675dfbba76213b3c">finished</a></td></tr>
<tr class="memdesc:a75c8aedc59733d2d675dfbba76213b3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the finished state of the receiver. Initiated as <code>NO</code> and should be set to <code>YES</code> once the receiver's work is done. Generally this will be once sampling session is completed. <br /></td></tr>
<tr class="separator:a75c8aedc59733d2d675dfbba76213b3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b9c4064b5fecf6d5c529d95a57e030f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6b9c4064b5fecf6d5c529d95a57e030f"></a>
<a class="el" href="interface_d_r_h_daq_device.html">DRHDaqDevice</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_d_r_h_sampling_operation.html#a6b9c4064b5fecf6d5c529d95a57e030f">daqDevice</a></td></tr>
<tr class="memdesc:a6b9c4064b5fecf6d5c529d95a57e030f"><td class="mdescLeft">&#160;</td><td class="mdescRight">A hardware device that will be used for the sampling. This device is set during initialisation and should not be changed. By default no cofiguration of the DAQ device is performed by <code><a class="el" href="interface_d_r_h_sampling_operation.html" title="A class for managing concurrent sampling of data from a DAQ device. ">DRHSamplingOperation</a></code>. <br /></td></tr>
<tr class="separator:a6b9c4064b5fecf6d5c529d95a57e030f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1957a2179e374271a78c33a4393ffb7b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1957a2179e374271a78c33a4393ffb7b"></a>
id&lt; <a class="el" href="protocol_d_r_h_sampling_operation_recipient-p.html">DRHSamplingOperationRecipient</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_d_r_h_sampling_operation.html#a1957a2179e374271a78c33a4393ffb7b">dataRecipient</a></td></tr>
<tr class="memdesc:a1957a2179e374271a78c33a4393ffb7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The object that will receive the data sampled by this samplingOperation. The <code>dataRecipient</code> must be an instance of a class that conforms to the <code><a class="el" href="protocol_d_r_h_sampling_operation_recipient-p.html" title="A protocol that defines which methods a class must implement to receive data from a DRHSamplingOperat...">DRHSamplingOperationRecipient</a></code> protocol. <br /></td></tr>
<tr class="separator:a1957a2179e374271a78c33a4393ffb7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class for managing concurrent sampling of data from a DAQ device. </p>
<p>This class is a subclass of <code>NSOperation</code> and is intended to be run concurrently. Generally when streaming data continusouly the user will want it done on a separate thread so that it is not interupted by, or dependent on, user input to the rest of the application. This class interfaces with a DAQ device and manages the concurrent sampling. <code><a class="el" href="interface_d_r_h_sampling_operation.html" title="A class for managing concurrent sampling of data from a DAQ device. ">DRHSamplingOperation</a></code> overrides <code>main</code>, <code>start</code> and <code>completeOperation</code> from the <code>NSOperation</code> class and sets the priority of its <code>NSThread</code> as 0.75 so that sampling priority is higher than most applications.</p>
<p>As a subclass of <code>NSOperation</code> this class overrides <code>main</code> (see Apple's <code>NSOperation</code> documentation for deatil). The <code>main</code> method of <code><a class="el" href="interface_d_r_h_sampling_operation.html" title="A class for managing concurrent sampling of data from a DAQ device. ">DRHSamplingOperation</a></code> checks if the operation has been cancelled and if so it calls the <code>completeOperation</code> method to finalise the samplingOperation. If the samplingOperation has not been cancelled it simply calls the <code>readData</code> method. This <code>readData</code> method simply does the following: </p><div class="fragment"><div class="line">NSArray *newData = [<a class="code" href="interface_d_r_h_sampling_operation.html#a6b9c4064b5fecf6d5c529d95a57e030f">daqDevice</a> readStreamData];</div>
<div class="line">[<a class="code" href="interface_d_r_h_sampling_operation.html#a1957a2179e374271a78c33a4393ffb7b">dataRecipient</a> receiveData:newData];</div>
</div><!-- fragment --><p> With just simple data collection <code><a class="el" href="interface_d_r_h_sampling_operation.html" title="A class for managing concurrent sampling of data from a DAQ device. ">DRHSamplingOperation</a></code> can be used as is. If you want more complex data handling you can subclass <code><a class="el" href="interface_d_r_h_sampling_operation.html" title="A class for managing concurrent sampling of data from a DAQ device. ">DRHSamplingOperation</a></code> and override the <code>readData</code> method without necessarily needing to override <code>main</code>. A <code>completeOperation</code> method is also implemented to do the following: </p><div class="fragment"><div class="line">[<span class="keyword">self</span> willChangeValueForKey:<span class="stringliteral">@&quot;isFinished&quot;</span>];</div>
<div class="line">[<span class="keyword">self</span> willChangeValueForKey:<span class="stringliteral">@&quot;isExecuting&quot;</span>];</div>
<div class="line"><a class="code" href="interface_d_r_h_sampling_operation.html#a8be933f8f0eaed7ae54c915174a03c54">executing</a> = NO;</div>
<div class="line"><a class="code" href="interface_d_r_h_sampling_operation.html#a75c8aedc59733d2d675dfbba76213b3c">finished</a> = YES;</div>
<div class="line">[<a class="code" href="interface_d_r_h_sampling_operation.html#a6b9c4064b5fecf6d5c529d95a57e030f">daqDevice</a> stopStream];</div>
<div class="line">[<span class="keyword">self</span> didChangeValueForKey:<span class="stringliteral">@&quot;isExecuting&quot;</span>];</div>
<div class="line">[<span class="keyword">self</span> didChangeValueForKey:<span class="stringliteral">@&quot;isFinished&quot;</span>];</div>
</div><!-- fragment --><p> If you need to do other cleaning up after sampling to stopped you should subclass and override <code>completeOperation</code>.</p>
<p>To use this class you will need to initialise it with a <code>daqDevice</code> and a <code>dataRecipient</code>. Then you must separately configure the DAQ device and ensure that the dataRecipient has a method with the definition <code>-</code>(void)receiveData:(NSArray *)newData to handle the sampled data generated by the <code>daqDevice</code> object's <code>readStreamData</code> method. The <code><a class="el" href="interface_d_r_h_sampling_operation.html" title="A class for managing concurrent sampling of data from a DAQ device. ">DRHSamplingOperation</a></code> is started by calling the <code>start</code> method and stopped by sending it a <code>cancel</code> message. For example if <code>myDaqDevice</code> is an instance of a <code><a class="el" href="interface_d_r_h_daq_device.html" title="A top level class for interacting with data aqusition hardware. ">DRHDaqDevice</a></code> subclass and <code>dataStorage</code> will receive the data:</p>
<div class="fragment"><div class="line"><span class="comment">//Create a new sampling operation and start it</span></div>
<div class="line"><a class="code" href="interface_d_r_h_sampling_operation.html">DRHSamplingOperation</a> mySamplingOp = [<a class="code" href="interface_d_r_h_sampling_operation.html">DRHSamplingOperation</a> samplingOperationWith: myDaqDevice And:dataStorage];</div>
<div class="line">[mySamplingOp <a class="code" href="interface_d_r_h_sampling_operation.html#a3e7f9cd2f90d9876fcf416142d0784f6">start</a>];</div>
<div class="line"></div>
<div class="line"><span class="comment">//Wait for sampling work to complete...</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//Stop sampling</span></div>
<div class="line">[mySampling <a class="code" href="interface_d_r_h_sampling_operation.html#a76b9e1d150c5cb3ac1b5fc6e24c29719">cancel</a>];</div>
<div class="line"></div>
<div class="line"><span class="comment">//This sampling operation is finished and can&#39;t be started again.</span></div>
</div><!-- fragment --> </div><h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="a76b9e1d150c5cb3ac1b5fc6e24c29719"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) cancel </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calling this method will stop your samplingOperation. Once stopped it cannot be restarted you need to create a new samplingOperation. </p>

</div>
</div>
<a class="anchor" id="ae3c93d199c77b174e8cfd519a85f44ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_d_r_h_sampling_operation.html">DRHSamplingOperation</a> *) initSamplingOperationWith: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_d_r_h_daq_device.html">DRHDaqDevice</a> *)&#160;</td>
          <td class="paramname"><em>newDaqDevice</em></td>
        </tr>
        <tr>
          <td class="paramkey">And:</td>
          <td></td>
          <td class="paramtype">(id)&#160;</td>
          <td class="paramname"><em>dataRecipient</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialises an existing <code><a class="el" href="interface_d_r_h_sampling_operation.html" title="A class for managing concurrent sampling of data from a DAQ device. ">DRHSamplingOperation</a></code> object with a daqDevice and a dataRecipient. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newDaqDevice</td><td>An exisitng and initialised <code><a class="el" href="interface_d_r_h_daq_device.html" title="A top level class for interacting with data aqusition hardware. ">DRHDaqDevice</a></code> object that represents a configured hardware device that will be used for sampling. </td></tr>
    <tr><td class="paramname">dataRecipient</td><td>The object that will receive the data that is streamed from the daqDevice. The <code>dataRecipient</code> object's <code>receiveData:</code> method will be called each time new data is streamed from the daqDevice. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>An</code> initialised <code><a class="el" href="interface_d_r_h_sampling_operation.html" title="A class for managing concurrent sampling of data from a DAQ device. ">DRHSamplingOperation</a></code>. </dd></dl>

</div>
</div>
<a class="anchor" id="a1949e4d7009d4e794f2ffbeb298caef1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (<a class="el" href="interface_d_r_h_sampling_operation.html">DRHSamplingOperation</a> *) samplingOperationWith: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_d_r_h_daq_device.html">DRHDaqDevice</a> *)&#160;</td>
          <td class="paramname"><em>newDaqDevice</em></td>
        </tr>
        <tr>
          <td class="paramkey">And:</td>
          <td></td>
          <td class="paramtype">(id)&#160;</td>
          <td class="paramname"><em>dataRecipient</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates and initialises an existing <code><a class="el" href="interface_d_r_h_sampling_operation.html" title="A class for managing concurrent sampling of data from a DAQ device. ">DRHSamplingOperation</a></code> object with a daqDevice and a dataRecipient. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newDaqDevice</td><td>An exisitng and initialised <code><a class="el" href="interface_d_r_h_daq_device.html" title="A top level class for interacting with data aqusition hardware. ">DRHDaqDevice</a></code> object that represents a configured hardware device that will be used for sampling. </td></tr>
    <tr><td class="paramname">dataRecipient</td><td>The object that will receive the data that is streamed from the daqDevice. The <code>dataRecipient</code> object's <code>receiveData:</code> method will be called each time new data is streamed from the daqDevice. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>A</code> new and initialised <code><a class="el" href="interface_d_r_h_sampling_operation.html" title="A class for managing concurrent sampling of data from a DAQ device. ">DRHSamplingOperation</a></code>. </dd></dl>

</div>
</div>
<a class="anchor" id="a3e7f9cd2f90d9876fcf416142d0784f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) start </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calling this method still start your samplingOperation. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_d_r_h_sampling_operation_8h_source.html">DRHSamplingOperation.h</a></li>
<li>DRHSamplingOperation.m</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jun 15 2015 14:46:44 for LabBot by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
